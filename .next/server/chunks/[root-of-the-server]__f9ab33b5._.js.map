{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///Users/ajmares/Coding/Focus%20Tool/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6IAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///Users/ajmares/Coding/Focus%20Tool/src/app/api/weekly-focus/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\n\nexport async function GET() {\n  try {\n    // Get current week's focus\n    const now = new Date()\n    const startOfWeek = new Date(now.setDate(now.getDate() - now.getDay()))\n    const weekStartISO = `2024-W${Math.ceil((startOfWeek.getTime() - new Date(startOfWeek.getFullYear(), 0, 1).getTime()) / (7 * 24 * 60 * 60 * 1000))}`\n    \n    let weeklyFocus = await prisma.weeklyFocus.findUnique({\n      where: { weekStartISO }\n    })\n\n    // Create if doesn't exist\n    if (!weeklyFocus) {\n      weeklyFocus = await prisma.weeklyFocus.create({\n        data: {\n          weekStartISO,\n          themes: [],\n          targets: [],\n          committedMustDosPerDay: 3\n        }\n      })\n    }\n\n    return NextResponse.json(weeklyFocus)\n  } catch (error) {\n    console.error('Failed to fetch weekly focus:', error)\n    return NextResponse.json({ error: 'Failed to fetch weekly focus' }, { status: 500 })\n  }\n}\n\nexport async function PATCH(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const { themes, targets, committedMustDosPerDay } = body\n\n    const now = new Date()\n    const startOfWeek = new Date(now.setDate(now.getDate() - now.getDay()))\n    const weekStartISO = `2024-W${Math.ceil((startOfWeek.getTime() - new Date(startOfWeek.getFullYear(), 0, 1).getTime()) / (7 * 24 * 60 * 60 * 1000))}`\n\n    const weeklyFocus = await prisma.weeklyFocus.upsert({\n      where: { weekStartISO },\n      update: {\n        themes: themes ? JSON.stringify(themes) : undefined,\n        targets: targets ? JSON.stringify(targets) : undefined,\n        committedMustDosPerDay\n      },\n      create: {\n        weekStartISO,\n        themes: themes ? JSON.stringify(themes) : '[]',\n        targets: targets ? JSON.stringify(targets) : '[]',\n        committedMustDosPerDay: committedMustDosPerDay || 3\n      }\n    })\n\n    return NextResponse.json(weeklyFocus)\n  } catch (error) {\n    console.error('Failed to update weekly focus:', error)\n    return NextResponse.json({ error: 'Failed to update weekly focus' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,2BAA2B;QAC3B,MAAM,MAAM,IAAI;QAChB,MAAM,cAAc,IAAI,KAAK,IAAI,OAAO,CAAC,IAAI,OAAO,KAAK,IAAI,MAAM;QACnE,MAAM,eAAe,CAAC,MAAM,EAAE,KAAK,IAAI,CAAC,CAAC,YAAY,OAAO,KAAK,IAAI,KAAK,YAAY,WAAW,IAAI,GAAG,GAAG,OAAO,EAAE,IAAI,CAAC,IAAI,KAAK,KAAK,KAAK,IAAI,IAAI;QAEpJ,IAAI,cAAc,MAAM,gIAAM,CAAC,WAAW,CAAC,UAAU,CAAC;YACpD,OAAO;gBAAE;YAAa;QACxB;QAEA,0BAA0B;QAC1B,IAAI,CAAC,aAAa;YAChB,cAAc,MAAM,gIAAM,CAAC,WAAW,CAAC,MAAM,CAAC;gBAC5C,MAAM;oBACJ;oBACA,QAAQ,EAAE;oBACV,SAAS,EAAE;oBACX,wBAAwB;gBAC1B;YACF;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA+B,GAAG;YAAE,QAAQ;QAAI;IACpF;AACF;AAEO,eAAe,MAAM,OAAoB;IAC9C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,sBAAsB,EAAE,GAAG;QAEpD,MAAM,MAAM,IAAI;QAChB,MAAM,cAAc,IAAI,KAAK,IAAI,OAAO,CAAC,IAAI,OAAO,KAAK,IAAI,MAAM;QACnE,MAAM,eAAe,CAAC,MAAM,EAAE,KAAK,IAAI,CAAC,CAAC,YAAY,OAAO,KAAK,IAAI,KAAK,YAAY,WAAW,IAAI,GAAG,GAAG,OAAO,EAAE,IAAI,CAAC,IAAI,KAAK,KAAK,KAAK,IAAI,IAAI;QAEpJ,MAAM,cAAc,MAAM,gIAAM,CAAC,WAAW,CAAC,MAAM,CAAC;YAClD,OAAO;gBAAE;YAAa;YACtB,QAAQ;gBACN,QAAQ,SAAS,KAAK,SAAS,CAAC,UAAU;gBAC1C,SAAS,UAAU,KAAK,SAAS,CAAC,WAAW;gBAC7C;YACF;YACA,QAAQ;gBACN;gBACA,QAAQ,SAAS,KAAK,SAAS,CAAC,UAAU;gBAC1C,SAAS,UAAU,KAAK,SAAS,CAAC,WAAW;gBAC7C,wBAAwB,0BAA0B;YACpD;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAgC,GAAG;YAAE,QAAQ;QAAI;IACrF;AACF","debugId":null}}]
}